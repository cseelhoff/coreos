{
  "ignition": {
    "version": "3.3.0"
  },
  "passwd": {
    "users": [
      {
        "groups": [
          "docker",
          "wheel"
        ],
        "name": "admin",
        "passwordHash": "$y$j9T$xP4E93jrWCP37dNfSKGJL/$EYZt/NBmSBjHu9EeaKKVXKnszK0iJsHH/XCbXqdn.9B",
        "sshAuthorizedKeys": [
          "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC0JcTPNRGCgdBM97WC9x9c0fFiCGWCkK20mdVhaPoFHGchLnKbVCyZKBnekU+uOZb+SVDG+oZeOCIGH7uY/GG1a1idb/yQHrzbW+SvNofySTgs8pzU6uGxz6vvJDnzqnSTFGpvXBXRuolEipFUAXsaUFLqhahSROzA0JeX9U4mYlElz8Kix+R3FIVY5EEfJORLfSS4y65teWoaUOFLnfDN22519bWswFtlTa6yuP3rDZfePQ1vYFECzcrLgqn6G3SRUklCDo7j9UMdohP6Kon46eMA84jrH/ep6pK4EDRW7G5JpcbrosjYKCIgNEpkYlKs3ohvM4VoBRC+OON9YM7up14mq86swrP+0avb+8nNhtcRirhsdeBPEErElb3pvRNDkThQDPC9QtwwYlJ00xNyS/Xb+9BXVu2T2UZxEzV/usLHuiB5gvwDAbilT8DNivVT75I7UWDBOPoBcCW0BMkiY+OKAQb2c0k6yYSv3kSSBaTDUQX/WE+q/lvNHPpRcOZZoY56eLSiJCh3RKrOEqKAoA++AGH/8LYcXZLue28RrgGiZrWOcu3JDNQ1jKrixGHn5MDQh4LmARnQQ1w8euRJJsgqucIoj4dXbjYeFKlIQPzqI38vJKNRWgkv4Wan7V76d0nd7wji5JVKY5hfm/D/ZsvFiVK2ORMpfoVHsNJ0ow== root@fc614cbfe601 root@fc614cbfe601 root@fc614cbfe601 root@fc614cbfe601 root@fc614cbfe601 root@fc614cbfe601 root@fc614cbfe601 root@fc614cbfe601 root@fc614cbfe601 root@b13611c39020 root@b13611c39020 root@b13611c39020 root@b13611c39020 root@68e1a3b53fc4 root@68e1a3b53fc4 root@68e1a3b53fc4 root@68e1a3b53fc4 root@68e1a3b53fc4 root@68e1a3b53fc4 root@68e1a3b53fc4 root@68e1a3b53fc4 root@68e1a3b53fc4 root@68e1a3b53fc4 root@68e1a3b53fc4 root@68e1a3b53fc4 root@68e1a3b53fc4 root@68e1a3b53fc4 root@15a30bf7891e root@15a30bf7891e root@15a30bf7891e root@15a30bf7891e root@15a30bf7891e root@15a30bf7891e root@15a30bf7891e root@15a30bf7891e root@15a30bf7891e"
        ]
      }
    ]
  },
  "storage": {
    "files": [
      {
        "overwrite": true,
        "path": "/usr/local/bin/docker-compose",
        "contents": {
          "source": "https://github.com/docker/compose/releases/download/v2.24.2/docker-compose-linux-x86_64",
          "verification": {
            "hash": "sha512-DBB485B512B885DE15FF92C24D3CA1B0F46D62BF5DBCD166FD286F545652FA673E4988CFD43A708F7ECFEA34AC92538D119C4625E7B3DBB3BB006277F76F9823"
          }
        },
        "mode": 493
      },
      {
        "path": "/opt/portainer/deploy-stack.sh",
        "contents": {
          "compression": "gzip",
          "source": "data:;base64,H4sIAAAAAAAC/6yUX1PiSBTF3/tT3L2mjNQuBHzZWrZSWxGisGKSSYKDWhbVJo1pDJ1MuhkdHb/7FAkUf0TLh3mD3L4553fu7Rz8YdxxYdxRmZADuGcKomw2oyKGlAsGOS3ojClWQBBanfOxY13YsKhKlRUMuAKVwXdacHqXso0zZP3T1Fofv7nrds5tf9xxLzw3sMeeFfbel9hzmOx5ZmrH5ADYE1cgo4LnCvhkE4FLEJkCyRThE7iB+jNoL+v6n0+vcPsvqIQJAsCiJAPc242L8kKlRSaceK4fWn3H9sdDf2BiolTeNow0i2iaZFK1/2k2m0iGge2XwSCNZ1zgRptnBcFX1++amNid6Rd/FJ35j1T15pdGy7+eHP8tRnN2cn2VtoyRehhdnhbGIDKRWMOwN/asq4FrdU39BYeSFYLOGLYBddRWiqjjXwDoUSkfsyJeVt/Ko46vOvHtwHOdwDa1o2hepFCXUB+B5wYh1HuAnUwoJlQ9/JGzNtA8T3lEFc+EMZWZQKjHgNqmMQRtKyCD5tygc5XUKv+he247pnZUxq2t1OEnTL9BvYDG9FHViO10PbfvhJu0K9Iy6IXz1aGgmsMeWSbiPONCSSQDt2MNxquWfncb98yuaK25SrKCP5eEbThhtGAFaGvj+PlQdhkQtC3HFbLeuGneNvqxXqtWFLVdpwimCSjmaYob2/oxTzm+HbnP8p0COnTGzCrn8r+9zLFTsLJzwW22cEVQup9wsntF/w9cZxyEft85W9ijCrR9X4Fq9L6ERm35QVlPHXBjwdd3s1xxlIpGD6c8Zct5YBt01N43gTq86pXE+ztTvlT+pxaIx4czppIsNqUquLg/XO1TPzbfjonsuz6/c6G2skHQ1iDkVwAAAP//cOtjeOAFAAA="
        },
        "mode": 420
      },
      {
        "path": "/opt/portainer/openldap-docker-compose.yml",
        "contents": {
          "compression": "gzip",
          "source": "data:;base64,H4sIAAAAAAAC/3SUwW6jMBCG75X6Dhb3QtqoSeqbCyZYJYAwybYnywW3RRsMwjTavv3KQFJICCfs/7M9mn9mDqJWeSkhMB6M2xsl6kOeCgVvbwAoKyH3Ga/aBQB5wT8FBKXK/+XcOon35qM564i0lA3PpaiZ5IVGe6ZThTzkdSkLIZv+RgB8B0XMD9fMxzvs6yAeF8ZIDOM1CghFCQkDCIz75RLYUTJmnHCDiFa/lXm/XKZVY6ZlMWaeEcXM0dB4HzkbErAIUfonjB0IDJ4VuRwzdhi4ZD2E0lJ+5J9jKsbICQP/jW0pjiEwPvheiTPEtR/ms+UzoYzaHt6gaewZ2S840O8U2ftYSnwKgdHU3+Jin9lxwlzi4wBtMASGzryZ1s0l+ILfLsC/4ucSdDwWoRhthnT2VfGaF2YliokQ0HkUKZ+OAQduGNt4OgHtVSTycMzoliSaotjexvjhcQHvdjimd5T6c3N2eWyHY+K+MdsnOEh0uKLgMjt3KvKJfSyp8fsvGEcMvxKakGDdO3/FTLwJd/hYHMhNdLQ42UaTBlHqMw/7EY5ZFGOXvPaJ76mm+YFAn+qWqslyyXT/DHcP5f676JtTf3cg4w1/50pA68Bra5+/W7/9pvWuTqElmrRVLLXnVWZmA0LUjYLWqXWtfgR0pMWVEo2yWsrqTlWlPvF7gzFfPcH56skYbC3mC7iYH1s5Kwuey24mTPboV6maXj7lpPqq9H/bjpMTaATMzKdrU2jIXZ9EkRdpn7px0DrmhTShY5fOMC9JInpWHBfZWc1WM7g6VmomKiEzxUo5YH7n5NDhk7d60RvZ/oruhf8BAAD//yRwixC6BQAA"
        },
        "mode": 420
      }
    ]
  },
  "systemd": {
    "units": [
      {
        "contents": "[Unit]\nDescription=Open VM Tools\nAfter=network-online.target\nWants=network-online.target\n\n[Service]\nType=oneshot\nRemainAfterExit=yes\nTimeoutStartSec=0\nExecStartPre=-/usr/bin/docker stop %n\nExecStartPre=-/usr/bin/docker rm %n\nExecStartPre=/usr/bin/docker pull immutablecode/open-vm-tools:1.0.0\nExecStart=/usr/bin/docker run -e SYSTEMD_IGNORE_CHROOT=1 -v  /proc/:/hostproc/ -v /sys/fs/cgroup:/sys/fs/cgroup -v /run/systemd:/run/systemd --pid=host --net=host --ipc=host --uts=host --rm  --privileged --name open-vm-tools immutablecode/open-vm-tools:1.0.0\nExecStop=/usr/bin/docker stop -t 15 %n\n\n[Install]\nWantedBy=multi-user.target\n",
        "enabled": true,
        "name": "open-vm-tools.service"
      },
      {
        "contents": "[Unit]\nDescription=Portainer Admin Container\nAfter=docker.service\nRequires=docker.service network.target network-online.target\n\n[Service]\nType=oneshot\nRemainAfterExit=yes\nTimeoutStartSec=0\nExecStartPre=-/usr/bin/docker stop %n\nExecStartPre=-/usr/bin/docker rm %n\nExecStartPre=/usr/bin/docker pull portainer/portainer-ce\nExecStart=-/usr/bin/mkdir -p /var/portainer/data\nExecStart=/usr/bin/docker run --privileged=true -d -p 9000:9000 --name %n --restart always -v /var/run/docker.sock:/var/run/docker.sock -v /var/portainer/data:/data portainer/portainer-ce --admin-password '$$2y$$05$$pXroWdzryH8Ilis/01Ia8eZNqkD1nW.inPuUE3Uy9GK.DoGqH.Q0C'\nExecStop=/usr/bin/docker stop -t 15 %n\n\n[Install]\nWantedBy=multi-user.target",
        "enabled": true,
        "name": "docker.portainer.service"
      },
      {
        "contents": "[Unit]\nDescription=OpenLDAP Container\nAfter=docker.portainer.service\nRequires=docker.service docker.portainer.service network.target network-online.target\n\n[Service]\nType=oneshot\nRemainAfterExit=yes\nTimeoutStartSec=0\nExecStart=/usr/bin/sh /opt/portainer/deploy-stack.sh openldap /opt/portainer/openldap-docker-compose.yml\n\n[Install]\nWantedBy=multi-user.target",
        "enabled": true,
        "name": "docker.openldap.service"
      }
    ]
  }
}
